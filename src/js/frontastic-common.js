!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("lodash")):"function"==typeof define&&define.amd?define(["lodash"],t):"object"==typeof exports?exports["frontastic-common"]=t(require("lodash")):e["frontastic-common"]=t(e._)}(global,(function(e){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=8)}([function(t,i){t.exports=e},function(e){e.exports=JSON.parse('{"schema":[{"name":"Value Order","fields":[{"label":"Strip Label Prefix","field":"stripLabelPrefix","type":"boolean","default":false},{"label":"Sort Order","field":"sortOrder","type":"enum","values":[{"value":"sort-undefined","name":"Undefined"},{"value":"sort-ascending","name":"Ascending"},{"value":"sort-descending","name":"Descending"}],"default":"sort-undefined"}]}]}')},function(e){e.exports=JSON.parse('{"schema":[{"name":"Display Properties","fields":[{"label":"Highlight Menu Item","field":"displayHighlightMenuItem","type":"boolean","default":false},{"label":"Highlight Category Tag","field":"displayHighlightCategoryTag","type":"boolean","default":false},{"label":"Description","field":"displayDescription","type":"string","translatable":true},{"label":"Custom CSS Class","field":"displayClassname","type":"string","translatable":false},{"label":"Image","field":"displayMedia","type":"media","options":{"ratio":"4:1"}}]},{"name":"SEO","fields":[{"label":"Title","field":"seoTitle","type":"string","translatable":true},{"label":"Description","field":"seoDescription","type":"string","translatable":true},{"label":"Keywords","field":"seoKeywords","type":"string","translatable":true}]}]}')},function(e){e.exports=JSON.parse('{"schema":[]}')},function(e,t,i){var n=i(5),r=i(7);e.exports=function(e,t,i){var s=t&&i||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var o=0;o<16;++o)t[s+o]=a[o];return t||r(a)}},function(e,t,i){var n=i(6);e.exports=function(){return n.randomBytes(16)}},function(e,t){e.exports=require("crypto")},function(e,t){for(var i=[],n=0;n<256;++n)i[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,r=i;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")}},function(e,t,i){"use strict";i.r(t);var n=i(0),r=i.n(n);const s=["product","product-list","content","content-list"];function a(e,t,i){return void 0!==e?Boolean(e):"stream"===t&&s.includes(i)}function o(e){if(!r.a.isArray(e.fields))return{};let t={};for(let i=0;i<e.fields.length;++i){const n=e.fields[i];if(!n.field)continue;const r=n.type||"text";t[n.field]={field:n.field,type:r,sectionName:e.name||"",values:n.values||[],default:d(r,n.default),validate:n.validate||{},fields:n.fields||null,min:void 0===n.min?1:n.min,max:n.max||16,required:a(n.required,r,n.streamType),disabled:!0===n.disabled,translatable:n.translatable}}return t}function l(e,t){let i=e.default;if(void 0!==t[e.field]&&null!==t[e.field]&&(i=t[e.field]),"group"===e.type){let t=i.slice(0,e.max);for(let i=t.length;i<e.min;++i)t[i]={};return n=t,s=e.fields,r.a.map(n,e=>(null!==e&&"object"==typeof e||(e={}),r.a.forEach(s,t=>{void 0!==e[t.field]&&null!==e[t.field]||(e[t.field]=t.default||null)}),e))}var n,s;return i}function c(e,t,i,n){return("object"!=typeof n||r.a.isArray(n))&&(n={}),r.a.fromPairs(Object.values(e).map(e=>[e.field,u(e,t,i,n)]))}function u(e,t,i,n){const r=n[e.field];if("group"===e.type){const n=o(e);return l(e,t).map((e,t)=>{const s=void 0!==r&&r.length>t?r[t]:{};return c(n,e,i,s)})}if(void 0!==r)return r;const s=l(e,t);return"stream"===e.type?i[s]||null:s}function d(e,t){if(void 0!==t)return t;switch(e){case"group":return[];case"decimal":case"integer":case"float":case"number":return 0;case"string":case"text":case"markdown":return"";case"json":return"{}";case"boolean":return!1;default:return null}}class f{constructor(e=[],t={}){this.schema=e,this.setConfiguration(t),this.fields={};for(let e=0;e<this.schema.length;++e)this.fields={...this.fields,...o(this.schema[e])}}setConfiguration(e){this.configuration=r.a.isArray(e)?{}:e||{}}set(e,t){if(!this.fields[e])throw new Error("Unknown field "+e+" in this configuration schema.");return new f(this.schema,r.a.extend({},this.configuration,{[e]:t}))}get(e){const t=this.fields[e];return t?l(t,this.configuration):(console.warn("Unknown field "+e+" in this configuration schema."),this.configuration[e]||null)}getField(e){const t=this.fields[e];if(!t)throw new Error("Unknown field "+e+" in this configuration schema.");return t}has(e){return!!this.fields[e]}getSchema(){return this.schema}getConfiguration(){return this.configuration}isFieldRequired(e){return this.getField(e).required}isFieldDisabled(e){return this.getField(e).disabled}hasMissingRequiredValueInField(e,t=!1){const i=this.getField(e),n=this.get(e);return"group"===i.type?n.some(e=>new f([i],e).hasMissingRequiredFieldValues(t)):!!i.required&&(("stream"!==i.type||!t)&&("reference"===i.type?"object"!=typeof n||null===n||"string"!=typeof n.type||""===n.type||"string"!=typeof n.target||""===n.target:null==n||""===n))}hasMissingRequiredFieldValues(e=!1){return Object.keys(this.fields).some(t=>this.hasMissingRequiredValueInField(t,e))}hasMissingRequiredFieldValuesInSection(e,t=!1){return Object.entries(this.fields).some(([i,n])=>n.sectionName===e&&this.hasMissingRequiredValueInField(i,t))}getConfigurationWithResolvedStreams(e={},t={}){return c(this.fields,this.configuration,e,t)}}var h=f,g={NodeConfigurationSchema:i(2),CellConfigurationSchema:i(3)},m=i(4),p=i.n(m),y=function(){return p()()},v=function(e,t,i){if(!r.a.isObject(e))return{text:e,locale:t};if(e[t])return{text:e[t],locale:t};if(e[i])return{text:e[i],locale:i};if(!Object.keys(e).length)return{text:"",locale:null,translated:!1};let n=Object.keys(e)[0];return{text:e[n]||"",locale:n,translated:!1}};const b=e=>{switch(e){case"string":case"text":case"markdown":case"json":return!0;default:return!1}},w=e=>void 0!==e.translatable?e.translatable:b(e.type);let I=function(e){return e=(e+"").toString(),encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")};var C=function(e,t,i){let n,r,s=[],a=function(e,t,i){let n,r=[];if(!0===t?t="1":!1===t&&(t="0"),null!=t){if("object"==typeof t){for(n in t)null!=t[n]&&r.push(a(e+"["+n+"]",t[n],i));return r.join(i)}if("function"!=typeof t)return I(e)+"="+I(t);throw new Error("There was an error processing for httpBuildQuery().")}return""};for(r in i||(i="&"),e){n=e[r],t&&!isNaN(r)&&(r=String(t)+r);let o=a(r,n,i);""!==o&&s.push(o)}return s.join(i)};let k=function(e){return r.a.mapValues(e,e=>(r.a.isObject(e)&&(e=k(e)),function(e){if(!r.a.isObject(e))return!1;const t=r.a.keys(e);for(let e=0;e<t.length;e++)if(t[e]!==r.a.toString(e))return!1;return!0}(e)&&(e=r.a.values(e)),e))};var x=function(e){let t={};return function(e,t){var i,n,r,s,a,o,l,c,u,d,f,h,g,m=String(e).replace(/^&/,"").replace(/&$/,"").split("&"),p=m.length,y=function(e){return decodeURIComponent(e.replace(/\+/g,"%20"))};for(t||(t=this.window),i=0;i<p;i++){for(u=y((c=m[i].split("="))[0]),d=c.length<2?"":y(c[1]);" "===u.charAt(0);)u=u.slice(1);if(u.indexOf("\0")>-1&&(u=u.slice(0,u.indexOf("\0"))),u&&"["!==u.charAt(0)){for(h=[],f=0,n=0;n<u.length;n++)if("["!==u.charAt(n)||f){if("]"===u.charAt(n)&&f&&(h.length||h.push(u.slice(0,f-1)),h.push(u.substr(f,n-f)),f=0,"["!==u.charAt(n+1)))break}else f=n+1;for(h.length||(h=[u]),n=0;n<h[0].length&&(" "!==(l=h[0].charAt(n))&&"."!==l&&"["!==l||(h[0]=h[0].substr(0,n)+"_"+h[0].substr(n+1)),"["!==l);n++);for(o=t,n=0,g=h.length;n<g;n++)if(u=h[n].replace(/^['"]/,"").replace(/['"]$/,""),n!==h.length-1,a=o,""!==u&&" "!==u||0===n)void 0===o[u]&&(o[u]={}),o=o[u];else{for(s in r=-1,o)o.hasOwnProperty(s)&&+s>r&&s.match(/^\d+$/g)&&(r=+s);u=r+1}a[u]=d}}}(e,t),t=k(t),t};const S=Boolean("undefined"==typeof window||!window.location.hostname||"localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function T(){if("serviceWorker"in navigator){const e=process.env.PUBLIC_URL||"/";if(new URL(e,window.location).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="/service-worker.js";S?function(e){fetch(e).then(t=>{404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):E(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e):E(e)})}}function E(e){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const t=e.installing;t.onstatechange=()=>{"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(e=>{console.error("Error during service worker registration:",e)})}var O=function(){let e,t,i={};if(this.registerCallBack=function(e,t){let n=null;do{n=Math.floor(65536*(1+Math.random())).toString(16).substring(1)}while(n in i);return i[n]={hidden:e,active:t},n},this.removeCallBack=function(e){delete i[e]},"undefined"==typeof document?(e=!1,t=!1):void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.mozHidden?(e="mozHidden",t="mozvisibilitychange"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),e&&t){let n=function(){r.a.map(i,(t,i)=>{document[e]?t.hidden():t.active()})};void 0===document.addEventListener||void 0===document[e]?console.warn("This feature requires a browser, such as Google Chrome or Firefox, that supports the Page Visibility API."):document.addEventListener(t,n,!1)}},j=[{size:12,name:"1",icon:"looks_one"},{size:6,name:"1/2",icon:"looks_two"},{size:4,name:"1/3",icon:"looks_3"},{size:8,name:"2/3",icon:"looks_3"},{size:3,name:"1/4",icon:"looks_4"},{size:9,name:"3/4",icon:"looks_4"},{size:2,name:"1/6",icon:"looks_6"}];var D=class{constructor(e={}){this.tasticId=e.tasticId||y(),this.tasticType=e.tasticType,this.configuration=e.configuration||{};let t=[{name:"General",folded:!0,fields:[{label:"Name",field:"name",type:"string"},{label:"Show on Mobile",field:"mobile",type:"boolean",default:!0},{label:"Show on Tablet",field:"tablet",type:"boolean",default:!0},{label:"Show on Desktop",field:"desktop",type:"boolean",default:!0},{label:"Anchor",field:"tasticId",type:"string",translatable:!1,disabled:!0,default:"#"+this.tasticId}]}];if(e.schema)for(let i=0;i<e.schema.length;++i)t.push(e.schema[i]);this.schema=new h(t,this.configuration)}export(){return{tasticId:this.tasticId,tasticType:this.tasticType,configuration:this.schema.getConfiguration()}}};var R=class{constructor(e={}){if(this.cellId=e.cellId||y(),this.configuration=e.configuration||{},this.customConfiguration=e.customConfiguration||{},this.schema=new h([{name:"Responsive",folded:!0,fields:[{label:"Cell Width",field:"size",type:"enum",values:r.a.map(j,e=>({name:e.name,value:e.size})),default:12},{label:"Show on Mobile",field:"mobile",type:"boolean",default:!0},{label:"Show on Tablet",field:"tablet",type:"boolean",default:!0},{label:"Show on Desktop",field:"desktop",type:"boolean",default:!0}]}],this.configuration),this.tastics=[],e.tastics&&e.tastics.length)for(let t=0;t<e.tastics.length;++t)this.tastics.push(new D(e.tastics[t]))}addTastic(e,t={},i=[],n=0){const r=new D({tasticType:e,configuration:t,schema:i});return this.tastics.splice(n,0,r),r}getTastic(e){let t=r.a.find(this.tastics,{tasticId:e});if(!t)throw new Error("Could not find tastic with ID "+e);return t}getTasticCount(){return this.tastics.length}export(){return{cellId:this.cellId,configuration:this.schema.getConfiguration(),customConfiguration:this.customConfiguration,tastics:r.a.map(this.tastics,e=>e.export())}}};var M=class{constructor(e){if(!e.kitDefinitionId)throw new Error("Missing kitDefinitionId in "+JSON.stringify(e));this.kitDefinitionId=e.kitDefinitionId,this.kitId=e.kitId||y(),this.configuration=e.configuration||{}}export(){return{kitId:this.kitId,kitDefinitionId:this.kitDefinitionId,configuration:this.configuration}}};var A=class{constructor(e={}){if(this.regionId=e.regionId||y(),this.configuration=e.configuration||{},this.schema=new h([{name:"Responsive",folded:!0,fields:[{label:"Show on Mobile",field:"mobile",type:"boolean",default:!0},{label:"Show on Tablet",field:"tablet",type:"boolean",default:!0},{label:"Show on Desktop",field:"desktop",type:"boolean",default:!0}]},{name:"Layout",fields:[{label:"Cell Direction",field:"flexDirection",type:"enum",default:"row",values:[{value:"row",name:"Row"},{value:"column",name:"Column"},{value:"row-reverse",name:"Row (reversed)"},{value:"column-reverse",name:"Column (reversed)"}]},{label:"Cell Wrapping",field:"flexWrap",type:"enum",default:"wrap",values:[{value:"nowrap",name:"No Wrapping"},{value:"wrap",name:"Wrap Cells"}]},{label:"Justify Cells",field:"justifyContent",type:"enum",default:"space-between",values:[{value:"flex-start",name:"Put at beginning"},{value:"flex-end",name:"Put at end"},{value:"center",name:"Center Cells"},{value:"space-between",name:"Space between Cells"},{value:"space-around",name:"Space around Cells"},{value:"space-even",name:"Evenly spaced Cells"}]},{label:"Cell Alignment",field:"alignItems",type:"enum",default:"stretch",values:[{value:"flex-start",name:"Align to start"},{value:"flex-end",name:"Align to end"},{value:"center",name:"Center Cells"},{value:"stretch",name:"Stretch Cells"},{value:"baseline",name:"Align to baseline"}]},{label:"Align multiple Cell rows",field:"alignContent",type:"enum",default:"space-between",values:[{value:"flex-start",name:"Put at beginning"},{value:"flex-end",name:"Put at end"},{value:"center",name:"Center rows"},{value:"stretch",name:"Stretch rows"},{value:"space-between",name:"Space between rows"},{value:"space-around",name:"Space around rows"}]}]}],this.configuration),this.elements=[],e.elements&&e.elements.length)for(let t=0;t<e.elements.length;++t)this.addElement(e.elements[t])}addElement(e){if(e.cellId)return this.addCell(e);if(e.kitId)return this.addKit(e);throw new TypeError("Unknown element type: "+JSON.stringify(e))}addCell(e){return this.elements.push(new R(e)),this.elements[this.elements.length-1]}addKit(e){return this.elements.push(new M(e)),this.elements[this.elements.length-1]}getElement(e){let t=r.a.find(this.elements,e);if(!t)throw new Error("Could not find element with ID "+JSON.stringify(e));return t}getCells(){return this.elements.filter(e=>e instanceof R)}getKits(){return this.elements.filter(e=>e instanceof M)}export(){return{regionId:this.regionId,configuration:this.schema.getConfiguration(),elements:r.a.map(this.elements,e=>e.export())}}};var P=class{constructor(e={},t=[],i=[]){this.pageId=e.pageId||null,this.nodes=e.nodes||[],this.layoutId=e.layoutId||"three_rows",this.name=e.name||"Unnamed Page",this.regions={},this.tastics=r.a.map(i,"configurationSchema");for(let i=0;i<t.length;++i){let n=t[i];e.regions&&e.regions[n]&&e.regions[n].elements&&e.regions[n].elements.length&&(e.regions[n].elements=this.mapTastics(e.regions[n].elements)),this.createRegion(n,e.regions&&e.regions[n]||{})}}mapTastics(e){for(let t=0;t<e.length;++t){let i=e[t];if(i.cellId&&(i.tastics&&i.tastics.length))for(let e=0;e<i.tastics.length;++e){let t=i.tastics[e],n=r.a.find(this.tastics,e=>e.tasticType===t.tasticType)||{schema:[]};t.schema=n.schema}}return e}createRegion(e,t){t.regionId=e,this.regions[e]=new A(t)}getRegion(e){if(!this.regions[e])throw new Error("Region with identifier "+e+" unknown.");return this.regions[e]}addCell(e,t={}){return this.getRegion(e).addCell({configuration:t})}duplicateCell(e,t){const i=this.addCell(e,t.configuration);return t.tastics.forEach((t,n)=>{this.addTastic(e,i.cellId,t.tasticType,n,t.configuration)}),i}addKit(e,t){return this.getRegion(e).addKit(t)}findElement(e){for(let t in this.regions){let i=r.a.findIndex(this.regions[t].elements,e);if(i>=0)return[t,i]}throw new Error("Could not find element with "+JSON.stringify(e))}hasElement(e){try{return!!this.findElement(e)}catch(e){return!1}}getElement(e){let[t,i]=this.findElement(e);return this.regions[t].elements[i]}removeElement(e){let[t,i]=this.findElement(e);this.regions[t].elements.splice(i,1)}moveElement(e,t){if(!this.regions[t.region])throw new Error("Unknown target region "+t.region);let[i,n]=this.findElement(e),r=this.regions[i].elements.splice(n,1)[0];this.regions[t.region].elements.splice(void 0===t.element?this.regions[t.region].elements.length:t.element-(i===t.region&&t.element>n?1:0),0,r)}addTastic(e,t,i,n,s={}){let a=r.a.find(this.tastics,{tasticType:i});return this.getRegion(e).getElement({cellId:t}).addTastic(i,s,a,n)}getTastics(){let e=[];return Object.values(this.regions).forEach(t=>{t.getCells().forEach(t=>{e=e.concat(t.tastics)})}),e}findTastic(e){for(let t in this.regions)for(let i=0;i<this.regions[t].elements.length;++i){let n=r.a.findIndex(this.regions[t].elements[i].tastics,{tasticId:e});if(n>=0)return[t,i,n]}throw new Error("Could not find tastic with id "+e)}hasTastic(e){try{return!!this.findTastic(e)}catch(e){return!1}}getTastic(e){let[t,i,n]=this.findTastic(e);return this.regions[t].elements[i].tastics[n]}removeTastic(e){let[t,i,n]=this.findTastic(e);this.regions[t].elements[i].tastics.splice(n,1)}moveTastic(e,t){let[i,n,r]=this.findTastic(e),s=this.regions[i].elements[n].tastics.splice(r,1)[0],[a,o]=this.findElement({cellId:t.cell});this.regions[a].elements[o].tastics.splice(void 0===t.tasticDropPosition?this.regions[a].elements[o].tastics.length:t.tasticDropPosition-(i===a&&n===o&&t.tasticDropPosition>r?1:0),0,s)}duplicateTastic(e,t){const[i,,n]=this.findTastic(e),r=this.getTastic(e);return this.addTastic(i,t,r.tasticType,n+1,r.configuration)}export(){return{pageId:this.pageId,nodes:this.nodes,layoutId:this.layoutId,name:this.name,regions:r.a.mapValues(this.regions,e=>e.export())}}};const _=(e,t,i)=>{i={resourceType:"image",type:"upload",...i};let n=[];for(let[e,t]of Object.entries(i))switch(e){case"secure":case"resourceType":case"type":break;case"background":case"crop":case"fetch_format":case"gravity":case"height":case"quality":case"width":case"x":case"y":t&&n.push(e[0]+"_"+t);break;default:throw new Error("Unhandled image transformation "+e)}return n.sort(),`https://res.cloudinary.com/${t.cloudName}/${i.resourceType}/${i.type}/${n.join(",")}/${r=e,encodeURI(r).replace(/[?=]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}`;var r};var F=class{constructor(e){this.configuration={cloudName:e.cloudName}}getImageUrl(e,t,i,n={}){return _(e.mediaId,this.configuration,{fetch_format:e.format&&"svg"===e.format?void 0:"auto",width:t,height:i,quality:"auto",secure:!0,...this.getGravityOptions(n),...this.cropOptions(n)})}getFetchImageUrl(e,t,i,n={}){return e.startsWith("//")&&(e="https:"+e),_(e,this.configuration,{fetch_format:"auto",type:"fetch",width:t,height:i,quality:"auto",secure:!0,...this.getGravityOptions(n),...this.cropOptions(n)})}getImageUrlWithoutDefaults(e,t,i,n={}){return _(e.mediaId,this.configuration,{width:t,height:i,...n})}getGravityOptions(e){if(e.crop)return{};let t={gravity:"faces:auto"};return e.gravity&&(t.gravity="custom"===e.gravity.mode?"xy_center":e.gravity.mode,e.gravity.coordinates&&(t.x=e.gravity.coordinates.x,t.y=e.gravity.coordinates.y)),t}cropOptions(e){let t={crop:"fill"};return e.crop&&(t.crop=e.crop),e.background&&(t.background=e.background),t}};var N=class{constructor(){this.imageSizes=[16,32,64,128,256,512,1024,2048]}getImageDimensions(e,t,i,n=null,r=1){let s=this.getFloatRatio(e,n),a=Math.ceil(+t*r);return[a,i&&!n?Math.ceil(+i*r):Math.ceil(a*s)]}getFloatRatio(e,t=null){if(!t&&e&&e.width&&e.height)return e.height/e.width;const i=String(t).match(/([0-9]+):([0-9]+)/);return i?i[2]/i[1]:t}getImageLink(e,t,i,n,s,a={},o=1){let l=this.getMediaApi(t),[c,u]=this.getImageDimensions(e,i,n,s,o),d=c/u;if(["fill","pad"].includes(a.crop)){for(let e=0;e<this.imageSizes.length;++e)if(this.imageSizes[e]>=c){c=this.imageSizes[e];break}u=a.autoHeight?null:Math.ceil(c/d)}return r.a.isString(e)?l.getFetchImageUrl(e,c,u,a):l.getImageUrl(e,c,u,a)}getMediaApi(e){switch(e.media.engine){case"cloudinary":return new F(e.media);default:throw new Error("No valid media API found.")}}static getElementDimensions(e){let t=0;if(getComputedStyle){let i=getComputedStyle(e);t+=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)}return{width:e.clientWidth-t,height:e.clientHeight}}},U=i(1),q={enum:U,localizedEnum:U};i.d(t,"ConfigurationSchema",(function(){return h})),i.d(t,"DefaultSchemas",(function(){return g})),i.d(t,"generateId",(function(){return y})),i.d(t,"getTranslation",(function(){return v})),i.d(t,"httpBuildQuery",(function(){return C})),i.d(t,"httpParseQuery",(function(){return x})),i.d(t,"isTranslatableByDefault",(function(){return b})),i.d(t,"shouldFieldBeTranslated",(function(){return w})),i.d(t,"registerServiceWorker",(function(){return T})),i.d(t,"VisibilityChange",(function(){return O})),i.d(t,"cellDimensions",(function(){return j})),i.d(t,"Cell",(function(){return R})),i.d(t,"Page",(function(){return P})),i.d(t,"Region",(function(){return A})),i.d(t,"Tastic",(function(){return D})),i.d(t,"MediaApi",(function(){return N})),i.d(t,"FacetTypeSchemaMap",(function(){return q}))}])}));